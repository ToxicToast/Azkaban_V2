FROM nginx:stable-alpine

ENV HOST=0.0.0.0
ENV PORT=80
ENV NODE_ENV production

ARG NX_AUTHENTIK_AUTHORITY
ARG NX_AUTHENTIK_CLIENT_ID
ARG NX_AUTHENTIK_CLIENT_SECRET

ENV NX_AUTHENTIK_AUTHORITY=$NX_AUTHENTIK_AUTHORITY
ENV NX_AUTHENTIK_CLIENT_ID=$NX_AUTHENTIK_CLIENT_ID
ENV NX_AUTHENTIK_CLIENT_SECRET=$NX_AUTHENTIK_CLIENT_SECRET

COPY dist/apps/inventory-admin /usr/share/nginx/html

CMD ["nginx", "-g", "daemon off;"]
